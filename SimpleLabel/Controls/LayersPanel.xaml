<UserControl x:Class="SimpleLabel.Controls.LayersPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d"
             d:DesignHeight="400" d:DesignWidth="200"
             Background="{DynamicResource PanelBackgroundBrush}">
    <DockPanel>
        <TextBlock DockPanel.Dock="Top"
                   Text="Layers"
                   FontWeight="Bold"
                   FontSize="14"
                   Padding="10"
                   Background="{DynamicResource HeaderBackgroundBrush}" />

        <Grid>
            <ListBox x:Name="layersList"
                     AllowDrop="True"
                     BorderThickness="0"
                     Background="Transparent"
                     SelectionMode="Extended"
                     SelectionChanged="LayersList_SelectionChanged"
                     PreviewMouseLeftButtonDown="LayersList_PreviewMouseLeftButtonDown"
                     PreviewMouseMove="LayersList_PreviewMouseMove"
                     DragOver="LayersList_DragOver"
                     DragLeave="LayersList_DragLeave"
                     Drop="LayersList_Drop">
                <ListBox.ItemContainerStyle>
                    <Style TargetType="ListBoxItem">
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="Padding" Value="0" />
                    </Style>
                </ListBox.ItemContainerStyle>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border x:Name="itemBorder" BorderThickness="0,2,0,0" BorderBrush="Transparent">
                            <TextBlock Text="{Binding DisplayName}" Padding="8,4" />
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

            <!-- Drop indicator line -->
            <Canvas x:Name="dropIndicatorCanvas" IsHitTestVisible="False">
                <Border x:Name="dropIndicator"
                        Height="3"
                        Background="{DynamicResource AccentBrush}"
                        Visibility="Collapsed"
                        CornerRadius="1.5">
                    <Border.Effect>
                        <DropShadowEffect Color="#0078D7" BlurRadius="4" ShadowDepth="0" Opacity="0.5" />
                    </Border.Effect>
                </Border>
            </Canvas>
        </Grid>
    </DockPanel>
</UserControl>
